print((lambda r: (len((lambda f, a, b: f(f, a, b))(lambda f, a, b: set([g for e in [d for d in b if a in b[d]] for g in [e, *f(f, e, b)]]), 'shiny gold', {a[0]: (lambda f, b, c: f(f, b, c))(lambda f, b, c: f(f, b[1:], (lambda d: {d['b']: int(d['a']), **c})(r.match('(?P<a>\\d*) (?P<b>.*)', b[0]).groupdict())) if len(b) > 0 and b[0][0] != 'n' else c, a[1:], {}) for a in [i.split(', ') for i in r.sub(' contain ', ', ', r.sub('( bags*|\n)', '', open('_').read())).split('.') if i != '']}))))(__import__('re')))